"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[887],{3887:function(e,t,s){s.r(t),s.d(t,{default:function(){return z},withRouter:function(){return U}});var r=s(5671),i=s(3144),n=s(136),o=s(516),l=s(1413),a=s(2791),c=s(5987),u=s(9439),d="ProfileInfo_descriptionBlock__K0H7i",p=s(8181),f=s(184),h=function(e){var t=e.status,s=e.updateStatus,r=(0,a.useState)(!1),i=(0,u.Z)(r,2),n=i[0],o=i[1],l=(0,a.useState)(t),c=(0,u.Z)(l,2),d=c[0],p=c[1];(0,a.useEffect)((function(){p(t)}),[t]);return(0,f.jsxs)("div",{children:[!n&&(0,f.jsx)("div",{children:(0,f.jsx)("span",{onDoubleClick:function(){o(!0)},children:t||"Write you status"})}),n&&(0,f.jsx)("div",{children:(0,f.jsx)("input",{onChange:function(e){p(e.currentTarget.value)},onBlur:function(){o(!1),s(d)},autoFocus:!0,value:d})})]})},x=s(8987),v=s(4165),j=s(5861),g=s(81),m=s(1134),y=s(9911),b={background:"#4c4c70",padding:"5px",borderRadius:"10px"},k=function(e){var t=e.profile,s=e.setEditMode,r=(0,m.cI)(),i=r.handleSubmit,n=r.register,o=r.setValue,c=r.formState.errors,u=r.setError,d=(0,y.T)(),p=function(){var e=(0,j.Z)((0,v.Z)().mark((function e(t){var r,i;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d((0,g.Ms)(t));case 2:(r=e.sent)&&(i=r.toString().slice(30,-1).toLowerCase(),u("contacts."+i,{message:"not corrected url"}),console.log(r)),r||s(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){o("fullName",t.fullName),o("lookingForAJob",t.lookingForAJob),o("lookingForAJobDescription",t.lookingForAJobDescription),o("aboutMe",t.aboutMe),o("contacts",t.contacts)}),[]),(0,f.jsxs)("form",{onSubmit:i(p),children:[(0,f.jsxs)("div",{style:{display:"flex",gap:"20px"},children:[(0,f.jsxs)("div",{style:b,children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{children:"\u041e\u0431\u043e \u043c\u043d\u0435"}),(0,f.jsx)("textarea",(0,l.Z)((0,l.Z)({},n("aboutMe")),{},{placeholder:"About me"}))]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{children:"\u041f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f"}),(0,f.jsx)("input",(0,l.Z)((0,l.Z)({},n("fullName")),{},{placeholder:"fullName"}))]})]}),(0,f.jsxs)("div",{style:b,children:[(0,f.jsx)("div",{children:"\u0420\u0430\u0431\u043e\u0442\u0430"}),(0,f.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[(0,f.jsx)("span",{children:"\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443"}),(0,f.jsx)("input",(0,l.Z)((0,l.Z)({},n("lookingForAJob")),{},{type:"checkbox"}))]}),(0,f.jsxs)("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:[(0,f.jsx)("span",{children:"\u041c\u043e\u0438 \u0441\u043a\u0438\u043b\u043b\u044b"}),(0,f.jsx)("textarea",(0,l.Z)((0,l.Z)({},n("lookingForAJobDescription")),{},{placeholder:"my skills"}))]})]}),(0,f.jsxs)("div",{style:b,children:[(0,f.jsx)("div",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),Object.keys(c).length>0&&(0,f.jsx)("div",{style:{color:"red",fontSize:14},children:"not corrected url"}),Object.keys(t.contacts).map((function(e){return console.log(Object.keys(null===t||void 0===t?void 0:t.contacts).length),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:e})," ",(0,f.jsx)("input",(0,l.Z)((0,l.Z)({},n("contacts."+e)),{},{placeholder:e}))]},e)}))]})]}),(0,f.jsx)("button",{type:"submit",children:"Save"})]})},P=function(e){var t=e.contactTitle,s=e.contactValue;return(0,f.jsx)(f.Fragment,{children:s&&(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:t}),": ",s]})})},Z={background:"#4c4c70",padding:"5px",borderRadius:"10px"},S=function(e){var t=e.profile,s=e.isOwner,r=e.goToEditMode,i=(0,a.useState)(!1),n=(0,u.Z)(i,2),o=n[0],l=n[1];return(0,f.jsxs)(f.Fragment,{children:[s&&(0,f.jsx)("div",{children:(0,f.jsx)("button",{onClick:r,children:"edit"})}),t.aboutMe&&(0,f.jsxs)("div",{children:["\u041e\u0431\u043e \u043c\u043d\u0435 - ",t.aboutMe]}),o?(0,f.jsxs)("div",{style:{display:"flex",gap:"20px"},children:[(0,f.jsxs)("div",{style:Z,children:[(0,f.jsx)("div",{children:"\u0420\u0430\u0431\u043e\u0442\u0430"}),t.lookingForAJob?(0,f.jsxs)("div",{children:["\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443, \u043c\u043e\u0438 \u0441\u043a\u0438\u043b\u043b\u044b - ",t.lookingForAJobDescription]}):(0,f.jsx)("div",{children:"\u041d\u0435 \u0432 \u043f\u043e\u0438\u0441\u043a\u0430\u0445 \u0440\u0430\u0431\u043e\u0442\u044b"})]}),(0,f.jsxs)("div",{style:Z,children:[(0,f.jsx)("div",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),Object.entries(t.contacts).every((function(e){var t=(0,u.Z)(e,2);t[0];return""===t[1]}))&&(0,f.jsx)("div",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442"}),Object.keys(t.contacts).map((function(e){var s;return(0,f.jsx)(P,{contactTitle:e,contactValue:null===(s=t.contacts)||void 0===s?void 0:s[e]},e)}))]})]}):(0,f.jsx)("div",{onClick:function(){return l(!0)},style:{cursor:"pointer"},children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435..."})]})},w={opacity:0,height:0,width:0,lineHeight:0,overflow:"hidden",padding:0,margin:0};var A=function(e){var t,s=e.profile,r=e.status,i=e.updateStatus,n=e.isOwner,o=e.savePhoto,l=e.saveProfile,c=(0,a.useState)(!1),v=(0,u.Z)(c,2),j=v[0],g=v[1],m=(0,a.useRef)(null);return s?(0,f.jsx)("div",{children:(0,f.jsxs)("div",{className:d,children:[(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"220px",gap:5},children:[(0,f.jsx)("img",{src:(null===(t=s.photos)||void 0===t?void 0:t.large)||x,alt:"",style:{height:200}}),n&&(0,f.jsx)("button",{onClick:function(){var e;m&&(null===(e=m.current)||void 0===e||e.click())},children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e"}),n&&(0,f.jsx)("input",{type:"file",accept:".png,.jpg,",ref:m,style:w,onChange:function(e){if(e.target.files&&e.target.files.length){var t=e.target.files[0];o(t)}}})]}),(0,f.jsxs)("div",{style:{display:"flex",gap:20,alignItems:"end"},children:[(0,f.jsx)("div",{style:{fontSize:20},children:s.fullName}),(0,f.jsx)(h,{status:r,updateStatus:i})]}),(0,f.jsx)("hr",{}),j&&n?(0,f.jsx)(k,{profile:s,saveProfile:l,setEditMode:g}):(0,f.jsx)(S,{profile:s,isOwner:n,goToEditMode:function(){return g(!0)}})]})}):(0,f.jsx)(p.Z,{})},C=s(8687),M=s(3433),F={postsBlock:"MyPosts_postsBlock__8FbUf"},I="Post_item__ZRSr4";var O=function(e){return(0,f.jsxs)("div",{className:I,children:[(0,f.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR9vyJKx4pLsdMnrXtpsZzKgHIfTV-izdSGHA&usqp=CAU",alt:""}),e.description,(0,f.jsx)("div",{children:(0,f.jsxs)("span",{children:[e.likesCount," like"]})})]})},_=function(e){var t,s=(0,m.cI)({mode:"onChange"}),r=s.register,i=s.reset,n=s.handleSubmit,o=s.formState.errors;return(0,f.jsxs)("form",{onSubmit:n((function(t){e.newPostBody(t.newPostProfile),i()})),style:{display:"flex",flexDirection:"column",gap:"10px",width:"200px"},children:[(0,f.jsx)("textarea",(0,l.Z)((0,l.Z)({},r("newPostProfile",{required:"field is required"})),{},{placeholder:"enter your message"})),o&&(0,f.jsx)("div",{style:{color:"red",fontSize:"14px"},children:null===(t=o.newPostProfile)||void 0===t?void 0:t.message}),(0,f.jsx)("button",{type:"submit",children:"Add post"})]})},N=a.memo((function(e){console.log("Render yo");var t=(0,M.Z)(e.posts).map((function(e){return(0,f.jsx)(O,{description:e.description,likesCount:e.likesCount},e.id)}));return(0,f.jsxs)("div",{className:F.postsBlock,children:[(0,f.jsx)("h3",{children:"My posts"}),(0,f.jsx)(_,{newPostBody:function(t){return e.addPost(t)}}),(0,f.jsx)("div",{className:F.posts,children:t})]})})),D=(0,C.$j)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){e((0,g.Pi)(t))}}}))(N),J=["profile","status","updateStatus","savePhoto","saveProfile"];var T=function(e){var t=e.profile,s=e.status,r=e.updateStatus,i=e.savePhoto,n=e.saveProfile,o=(0,c.Z)(e,J);return(0,f.jsxs)("div",{children:[(0,f.jsx)(A,{profile:t,status:s,updateStatus:r,isOwner:o.isOwner,savePhoto:i,saveProfile:n}),(0,f.jsx)(D,{})]})},B=s(7781),E=s(7689),R=s(2163);function U(e){return function(t){var s=(0,E.TH)(),r=(0,E.s0)(),i=(0,E.UO)();return(0,f.jsx)(e,(0,l.Z)((0,l.Z)({},t),{},{router:{location:s,navigate:r,params:i}}))}}var q=function(e){(0,n.Z)(s,e);var t=(0,o.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,i.Z)(s,[{key:"refreshProfile",value:function(){var e=this.props.router.params.userId;if(!e&&("null"===(e="".concat(this.props.authUserId))||!e))return this.props.router.navigate("/login");this.props.getProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,s){this.props.router.params.userId!==e.router.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,f.jsx)(T,(0,l.Z)((0,l.Z)({},this.props),{},{profile:this.props.profile,status:this.props.status,isOwner:!this.props.router.params.userId,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))}}]),s}(a.Component),z=(0,B.qC)((0,C.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authUserId:e.auth.id,isAuth:e.auth.isAuth}}),{setUserProfile:g.kC,getProfile:g.GA,getStatus:g.GP,updateStatus:g.OG,savePhoto:g.Tw,saveProfile:g.Ms}),U,R.e)(q)},2163:function(e,t,s){s.d(t,{e:function(){return u}});var r=s(1413),i=s(5987),n=(s(2791),s(8687)),o=s(7689),l=s(184),a=["isAuth"],c=function(e){return{isAuth:e.auth.isAuth}};function u(e){return(0,n.$j)(c)((function(t){var s=t.isAuth,n=(0,i.Z)(t,a);return s?(0,l.jsx)(e,(0,r.Z)({},n)):(0,l.jsx)(o.Fg,{to:"/login"})}))}},8987:function(e,t,s){e.exports=s.p+"static/media/avatar.9dc92b0a1003b149f6c9.png"}}]);
//# sourceMappingURL=887.f1606db9.chunk.js.map